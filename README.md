# ccplan

CLI tool to manage the lifecycle of `.claude/plans/*.md` files generated by Claude Code's plan mode.

Adds frontmatter with status (draft / active / done) to plan files, enabling listing, filtering, and cleanup.

## Install

```bash
# Run with bunx
bunx ccplan

# Global install
bun add -g ccplan

# Single binary (GitHub Releases)
curl -L https://github.com/fujitanisora/ccplan/releases/latest/download/ccplan-darwin-arm64 -o ccplan
chmod +x ccplan
```

## Shell Completion

```bash
# zsh (add to .zshrc)
eval "$(ccplan --completions zsh)"

# bash (add to .bashrc)
eval "$(ccplan --completions bash)"
```

Enables tab completion for:

- Subcommands — `ccplan <TAB>` → `list`, `status`, `clean`, `open`
- Plan filenames — `ccplan status <TAB>` → lists `.claude/plans/*.md` files
- Statuses — `ccplan status file.md <TAB>` → `draft`, `active`, `done`
- Options — `ccplan list <TAB>` → `--status`, `--json`

## Usage

### `ccplan list`

List plans.

```bash
ccplan list
ccplan list --status active
ccplan list --json
```

### `ccplan status <file> <status>`

Change plan status. Automatically adds frontmatter if missing.

```bash
ccplan status my-plan.md active
ccplan status --latest done
```

Valid statuses: `draft`, `active`, `done`

### `ccplan open <file>`

Open a plan file in `$EDITOR` (defaults to `vi`).

```bash
ccplan open my-plan.md
ccplan open --latest
```

### `ccplan clean`

Delete done plan files.

```bash
ccplan clean              # done for 30+ days (with confirmation)
ccplan clean --days 7
ccplan clean --dry-run
ccplan clean --force      # skip confirmation
```

## Frontmatter Format

ccplan writes under the `ccplan` namespace. Existing frontmatter keys are preserved.

```yaml
---
ccplan:
  status: active
  created: '2026-01-15T10:00:00.000Z'
  updated: '2026-02-20T12:00:00.000Z'
---
```

## Development

```bash
bun install
bun run test
bun run build        # dist/index.js (npm package)
bun run build:bin    # ./ccplan (single binary)
```

## License

MIT
